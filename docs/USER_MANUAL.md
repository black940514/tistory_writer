# 논문 리뷰 발행기 사용자 매뉴얼

## 목차
1. [개요](#개요)
2. [실행 방법](#실행-방법)
3. [화면 구성](#화면-구성)
4. [주요 기능](#주요-기능)
5. [단축키](#단축키)
6. [사용 시나리오](#사용-시나리오)
7. [문제 해결](#문제-해결)

---

## 개요

**논문 리뷰 발행기**는 AI 논문을 자동으로 리뷰하여 티스토리 블로그에 발행하는 GUI 프로그램입니다.

### 주요 특징
- **기존 논문 리스트**: 319개 이상의 사전 수집된 논문 데이터베이스
- **새 논문 검색**: 리스트에 없는 논문도 제목으로 검색하여 리뷰 생성
- **논문 미리보기**: 발행 전 논문 첫 페이지를 미리 확인
- **자동 발행**: 티스토리 블로그에 자동 포스팅
- **마크다운 백업**: 발행 실패 시 MD 파일 자동 저장
- **다크모드 지원**: 눈의 피로를 줄이는 다크모드 제공
- **검색 기록**: 이전 검색어 자동 완성 지원

---

## 실행 방법

### 방법 1: 스크립트 실행 (권장)
```bash
cd /Users/kimtaeyoun/Personal/Dev/Tistory_writer
./run_gui.sh
```

### 방법 2: 직접 실행
```bash
cd /Users/kimtaeyoun/Personal/Dev/Tistory_writer
python3 scripts/publish_gui.py
```

### 사전 요구사항
- Python 3.9 이상
- 필요 패키지 설치:
  ```bash
  pip install -r requirements.txt
  ```
- 유효한 Tistory 쿠키 (`data/cookies.json`)
- Claude API 키 (환경변수 또는 설정 파일)

---

## 화면 구성

프로그램은 **두 개의 탭**으로 구성되어 있습니다.

### 탭 1: 기존 논문 리스트

```
┌─────────────────────────────────────────────────────────────┐
│ [📚 기존 논문 리스트]  [🔍 새 논문 검색]         [🌙] [새로고침] │
├─────────────────────────────────────────────────────────────┤
│ 진행률: 0/319 (0.0%)  [░░░░░░░░░░░░░░░░░░░░░░░░]             │
├─────────────────────────────────────────────────────────────┤
│ 논문 목록 (미리뷰 우선)                                       │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 검색: [________________] ☑ 미리뷰만 표시                │ │
│ ├─────────────────────────────────────────────────────────┤ │
│ │ #  │ 상태 │ 논문 제목                    │ 년도 │ 인용수│ │
│ │────┼──────┼──────────────────────────────┼──────┼───────│ │
│ │ 1  │ 대기 │ SigLIP: Signal-Aware...      │ 2023 │ 150   │ │
│ │ 2  │ 대기 │ mPLUG-Owl: Modularization... │ 2023 │ 89    │ │
│ │... │ ...  │ ...                          │ ...  │ ...   │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ 선택된 논문                                                  │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 제목: SigLIP: Signal-Aware Contrastive Learning...      │ │
│ │ 저자: Xiaohua Zhai, Basil Mustafa 외 5명                 │ │
│ │ 년도: 2023 | 인용수: 150                                 │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ [👁️ 미리보기] [발행하기] [MD로만 저장] [자동발행] [폴더 열기]  │
└─────────────────────────────────────────────────────────────┘
```

### 탭 2: 새 논문 검색

```
┌─────────────────────────────────────────────────────────────┐
│ [📚 기존 논문 리스트]  [🔍 새 논문 검색]         [🌙] [새로고침] │
├─────────────────────────────────────────────────────────────┤
│ 🔍 논문 제목으로 검색                                         │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 논문 제목: [Attention Is All You Need___________] [검색] │ │
│ └─────────────────────────────────────────────────────────┘ │
│                                                             │
│ TIP: 정확한 논문 제목을 입력하면 더 정확한 결과를 얻을 수 있습니다 │
├─────────────────────────────────────────────────────────────┤
│ 검색 결과                                                    │
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ #  │ 논문 제목                          │ 년도 │ 인용수  │ │
│ │────┼────────────────────────────────────┼──────┼─────────│ │
│ │ 1  │ Attention Is All You Need          │ 2017 │ 50000+  │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ [👁️ 미리보기] [발행하기] [MD로만 저장]             [폴더 열기] │
└─────────────────────────────────────────────────────────────┘
```

---

## 주요 기능

### 1. 논문 리스트 관리

| 기능 | 설명 |
|------|------|
| **진행률 표시** | 전체 논문 중 리뷰 완료된 비율 (상단 프로그레스바) |
| **새로고침** | 논문 목록 다시 로드 (`Ctrl+R`) |
| **검색 필터** | 논문 제목으로 실시간 필터링 (`Ctrl+F`) |
| **미리뷰만 표시** | 아직 발행하지 않은 논문만 표시 |

### 2. 새 논문 검색

| 기능 | 설명 |
|------|------|
| **제목 검색** | 논문 제목 입력 후 검색 버튼 클릭 (`Ctrl+S`) |
| **검색 기록** | 이전 검색어 자동 완성 지원 |
| **외부 논문 지원** | 리스트에 없는 논문도 검색하여 리뷰 생성 가능 |

### 3. 논문 미리보기

| 기능 | 설명 |
|------|------|
| **미리보기 버튼** | 선택한 논문의 첫 페이지를 미리 확인 |
| **더블클릭** | 테이블에서 논문 더블클릭 시 미리보기 표시 |
| **내장 뷰어** | PyQtWebEngine 기반 내장 브라우저 |
| **외부 브라우저** | 내장 뷰어 불가 시 기본 브라우저에서 열기 |

### 4. PDF 다운로드

| 기능 | 설명 |
|------|------|
| **PDF 다운로드 버튼** | arXiv 논문의 PDF를 다운로드 |
| **저장 위치** | `pdfs/` 폴더에 자동 저장 |
| **파일명** | `논문제목_년도.pdf` 형식 |
| **PDF 폴더 버튼** | 상단의 📚 버튼으로 PDF 폴더 열기 |

> **참고**: 현재 arXiv 논문만 PDF 다운로드를 지원합니다.

### 5. 발행 옵션

| 버튼 | 설명 | 단축키 |
|------|------|--------|
| **발행하기** | 선택한 논문의 리뷰를 생성하고 티스토리에 발행 | `Ctrl+P` |
| **MD로만 저장** | 발행 없이 마크다운 파일만 저장 | `Ctrl+S` |
| **자동 선택 발행** | 미리뷰 논문 중 다음 순서 논문 자동 선택하여 발행 | - |
| **출력 폴더 열기** | output/ 폴더를 Finder에서 열기 | - |

### 6. 다크모드

| 기능 | 설명 |
|------|------|
| **토글 버튼** | 우측 상단 🌙/☀️ 버튼으로 전환 |
| **다크모드** | 어두운 배경, 밝은 텍스트 |
| **라이트모드** | 밝은 배경, 어두운 텍스트 (기본) |

### 7. 탭 전환

| 동작 | 설명 |
|------|------|
| **Ctrl+1** | 기존 논문 리스트 탭으로 이동 |
| **Ctrl+2** | 새 논문 검색 탭으로 이동 |

---

## 단축키

| 단축키 | 기능 |
|--------|------|
| `Ctrl+P` | 선택한 논문 발행하기 |
| `Ctrl+S` | MD로만 저장하기 / 검색 실행 |
| `Ctrl+R` | 논문 목록 새로고침 |
| `Ctrl+F` | 검색창으로 포커스 이동 |
| `Ctrl+1` | 기존 논문 리스트 탭 |
| `Ctrl+2` | 새 논문 검색 탭 |
| `더블클릭` | 논문 미리보기 |

---

## 사용 시나리오

### 시나리오 1: 기존 리스트에서 특정 논문 발행하기

1. 프로그램 실행
2. **📚 기존 논문 리스트** 탭 확인
3. 검색창에 키워드 입력하거나 목록에서 논문 **클릭**
4. **👁️ 미리보기** 버튼으로 논문 확인 (선택사항)
5. **발행하기** 버튼 클릭 (또는 `Ctrl+P`)
6. 확인 대화상자에서 **예** 클릭
7. 발행 완료 후 결과 확인
8. **발행된 글 열기**로 결과 확인

### 시나리오 2: 자동으로 다음 논문 발행하기

1. 프로그램 실행
2. **자동 선택 발행** 버튼 클릭
3. 확인 대화상자에서 **예** 클릭
4. 자동으로 다음 미리뷰 논문이 선택되어 발행됨
5. 발행 완료 후 결과 확인

### 시나리오 3: 리스트에 없는 새 논문 검색 후 발행

1. 프로그램 실행
2. **🔍 새 논문 검색** 탭 클릭 (또는 `Ctrl+2`)
3. 논문 제목 입력 (예: "Attention Is All You Need")
4. **검색** 버튼 클릭 (또는 `Ctrl+S`)
5. 검색 결과 테이블에서 논문 선택
6. **👁️ 미리보기**로 논문 확인 (선택사항)
7. **발행하기** 클릭
8. 발행 완료 후 결과 확인

### 시나리오 4: 마크다운만 저장하기 (테스트용)

1. 프로그램 실행
2. 논문 목록에서 원하는 논문 **클릭**
3. **MD로만 저장** 버튼 클릭
4. `output/` 폴더에 MD 파일 생성됨
5. **출력 폴더 열기**로 파일 확인

### 시나리오 5: 논문 PDF 다운로드

1. 프로그램 실행
2. 논문 목록에서 원하는 논문 **클릭** (또는 새 논문 검색)
3. **📥 PDF 다운로드** 버튼 클릭
4. 다운로드 진행률 확인
5. 완료 시 PDF 파일 열기 여부 선택
6. `pdfs/` 폴더에 PDF 저장됨

> **참고**: arXiv 논문만 PDF 다운로드를 지원합니다.

### 시나리오 6: 다크모드 사용

1. 프로그램 실행
2. 우측 상단의 **🌙** 버튼 클릭
3. 다크모드로 전환됨
4. 다시 클릭하면 라이트모드로 복귀

---

## 문제 해결

### 문제: 논문 목록이 비어있음

**원인**:
- 모든 논문이 이미 리뷰됨
- 데이터 파일 손상

**해결**:
1. "미리뷰만 표시" 체크박스 해제
2. `data/papers.json` 파일 확인
3. `data/paper_state.json`에서 `reviewed_papers` 초기화:
   ```json
   {
     "reviewed_papers": [],
     "current_index": 0
   }
   ```

### 문제: 새 논문 검색이 안 됨

**원인**:
- 논문 제목이 정확하지 않음
- Claude API 오류
- 네트워크 문제

**해결**:
1. 정확한 논문 제목 입력 (arXiv, Google Scholar에서 확인)
2. Claude API 키 확인
3. 인터넷 연결 확인

### 문제: 미리보기가 작동하지 않음

**원인**:
- PyQtWebEngine 미설치
- 논문 URL이 유효하지 않음

**해결**:
1. PyQtWebEngine 설치:
   ```bash
   pip install PyQtWebEngine
   ```
2. 미리보기 실패 시 자동으로 기본 브라우저에서 열림

### 문제: 발행 실패

**원인**:
- 티스토리 쿠키 만료
- 네트워크 오류
- Claude API 오류

**해결**:
1. MD 파일은 자동 저장됨 → `output/` 폴더 확인
2. 쿠키 갱신:
   ```bash
   python3 scripts/refresh_cookies.py
   ```
3. API 키 확인
4. 인터넷 연결 확인

### 문제: GUI가 응답하지 않음

**원인**: 발행 작업 진행 중

**해결**:
- 발행 작업은 시간이 걸릴 수 있음 (1-3분)
- 상태바에서 진행 상황 확인
- 강제 종료하지 말고 기다리기

### 문제: "쿠키 만료" 오류

**해결**:
```bash
# 쿠키 갱신 스크립트 실행
python3 scripts/refresh_cookies.py
```

---

## 파일 구조

```
Tistory_writer/
├── scripts/
│   ├── publish_gui.py      # GUI 메인 프로그램
│   ├── main.py             # 발행 로직
│   └── refresh_cookies.py  # 쿠키 갱신
├── data/
│   ├── papers.json         # 논문 데이터베이스
│   ├── paper_state.json    # 발행 상태 추적
│   ├── cookies.json        # 티스토리 인증 쿠키
│   └── search_history.json # 검색 기록 (자동 생성)
├── output/                 # MD 파일 저장 폴더
├── pdfs/                   # 다운로드된 논문 PDF 저장 폴더
├── config/
│   ├── config.yaml         # 기본 설정
│   └── prompts.yaml        # AI 프롬프트 설정
├── run_gui.sh              # GUI 실행 스크립트
└── docs/
    └── USER_MANUAL.md      # 이 문서
```

---

## 설정 파일

### config/config.yaml

```yaml
tistory:
  blog_name: "ty-analyst"  # 블로그 이름
  category_id: 0           # 카테고리 ID (0 = 기본)

output:
  directory: "output"      # MD 파일 저장 경로
```

### config/prompts.yaml

논문 리뷰 생성에 사용되는 AI 프롬프트를 커스터마이징할 수 있습니다.

---

## 버전 정보

- **버전**: 2.1.0
- **최종 업데이트**: 2026-01-25
- **주요 업데이트**:
  - 탭 기반 UI 구조
  - 새 논문 검색 기능
  - 논문 미리보기 기능
  - **논문 PDF 다운로드 기능 (arXiv 지원)**
  - 키보드 단축키 지원
  - 검색 기록 자동완성
  - 다크모드 지원

---

## 지원

문제가 발생하면:
1. `output/` 폴더의 MD 파일 확인
2. 터미널에서 직접 실행하여 오류 메시지 확인:
   ```bash
   python3 scripts/publish_gui.py
   ```
3. 쿠키 갱신 후 재시도
4. 로그 파일 확인 (있는 경우)
